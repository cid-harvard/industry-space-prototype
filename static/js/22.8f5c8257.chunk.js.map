{"version":3,"sources":["components/StrengthTable.js","components/CanvasIndustrySpaceUMapProximityEdgesThresholdWithTableSrength.js","pages/IndustrySpaceUMapEdgesThresholdWithTableStrength.js","../../node_modules/react-scripts/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/arrayLikeToArray.js","../../node_modules/react-scripts/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/unsupportedIterableToArray.js","../../node_modules/react-scripts/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral.js","../../node_modules/react-scripts/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray.js","../../node_modules/react-scripts/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/arrayWithHoles.js","../../node_modules/react-scripts/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/iterableToArrayLimit.js","../../node_modules/react-scripts/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/nonIterableRest.js","../../node_modules/react-scripts/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty.js","../../node_modules/react-scripts/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2.js","../../node_modules/react-scripts/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js","../../node_modules/react-scripts/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/arrayWithoutHoles.js","../../node_modules/react-scripts/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/iterableToArray.js","../../node_modules/react-scripts/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/nonIterableSpread.js","sector-legend.png","components/BasicLegend.js"],"names":["Root","styled","div","BackButton","button","Content","NodeList","NodeListItem","$color","rgba","TableTitle","Cell","Rank","strong","SectorCell","ProximityCell","Title","h1","Empty","Circle","Label","span","Table","props","nodes","hovered","updateSimulation","highlightedRef","useRef","containerRef","useEffect","current","undefined","highlightedNode","scrollTop","offsetTop","offsetHeight","selected","connected","title","label","replace","id","connectedNodes","map","node","i","color","parent","highlight","strength","Math","floor","length","style","backgroundColor","ref","onClick","triggerSimulationUpdate","key","borderLeft","String","fromCharCode","name","clearSelections","border","Tooltip","data","JSON","parse","proximityNodes","naicsData","colorMap","rootNodeRef","useState","nodeList","setNodeList","setHovered","setUpdateSimulation","rootEl","root","d3","height","window","innerHeight","width","innerWidth","smallerSize","padding","widthMargin","heightMargin","rangeWidth","rangeHeight","allXValues","allYValues","forEach","x","y","push","radiusAdjuster","n","radius","random","industry6Digit","find","code","toString","Error","naics_id","topLevelParentId","datum","parent_id","parseInt","console","error","xRange","yRange","xScale","domain","range","yScale","canvas","append","attr","context","getContext","simulation","force","d","proximity","velocityDecay","k","alpha","tick","transform","hoveredNode","primaryNodes","secondaryNodes","update","tempData","zoom","scaleExtent","on","simulationUpdate","canvasEl","dragsubject","invertX","invertY","nodeX","nodeY","dx","dy","applyX","applyY","highlightedId","save","clearRect","translate","scale","beginPath","arc","PI","fillStyle","polished","fill","cursor","strokeStyle","stroke","nodeCount","textAlign","textBaseline","font","fillText","restore","call","coords","event","trg","node2","allEdgeXValues","allEdgeYValues","xBounds","yBounds","bounds","max","min","transition","duration","links","edges","initGraph","setTimeout","createForceGraph","innerHTML","tooltip","top","left","tableLayout","_arrayLikeToArray","arr","len","arr2","Array","_unsupportedIterableToArray","o","minLen","Object","prototype","slice","constructor","from","test","_taggedTemplateLiteral","strings","raw","freeze","defineProperties","value","_slicedToArray","isArray","Symbol","iterator","_arr","_n","_d","_e","_s","_i","next","done","err","unsupportedIterableToArray","TypeError","_defineProperty","obj","defineProperty","enumerable","configurable","writable","ownKeys","object","enumerableOnly","keys","getOwnPropertySymbols","symbols","filter","sym","getOwnPropertyDescriptor","apply","_objectSpread2","target","arguments","source","getOwnPropertyDescriptors","_toConsumableArray","arrayLikeToArray","iter","module","exports","Legend","img","paddingRight","src","require"],"mappings":"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","file":"static/js/22.8f5c8257.chunk.js","sourcesContent":["import React, {useRef, useEffect} from 'react';\nimport styled from 'styled-components';\nimport {rgba} from 'polished';\n\nconst Root = styled.div`\n  position: fixed;\n  top: 0;\n  bottom: 0;\n  right: 0;\n  width: 450px;\n  padding: 1rem;\n  font-family: 'OfficeCodeProWeb', monospace;\n`;\n\nconst BackButton = styled.button`\n  position: fixed;\n  left: 0;\n  top: 0;\n  background-color: transparent;\n  border: none;\n  font-size: 1rem;\n  font-family: 'OfficeCodeProWeb', monospace;\n  cursor: pointer;\n  padding: 1rem;\n`;\n\nconst Content = styled.div`\n  padding: 1rem;\n  box-sizing: border-box;\n  box-shadow: 1px 2px 5px 0px rgba(0,0,0,0.45);\n  display: grid;\n  grid-template-rows: auto 1fr;\n  width: 100%;\n  height: 100%;\n  background-color: rgba(255, 255, 255, 0.55);\n`;\n\nconst NodeList = styled.div`\n  margin-top: 1rem;\n  overflow: auto;\n  position: relative;\n`;\n\nconst NodeListItem = styled.div`\n  display: grid;\n  grid-template-columns: 180px 1fr 1fr;\n  font-size: 0.8rem;\n\n  &:hover {\n    ${({$color}) => $color ? 'background-color:' + rgba($color, 0.4) + ';' : ''}\n    cursor: pointer;\n  }\n`;\n\nconst TableTitle = styled(NodeListItem)`\n  border-bottom: solid 1px black;\n  position: sticky;\n  top: 0;\n  background-color: #fff;\n`;\n\nconst Cell = styled.div`\n  padding: 0.5rem;\n  display: flex;\n  align-items: center;\n`;\nconst Rank = styled.strong`\n  margin-right: 0.7rem;\n`;\n\nconst SectorCell = styled(Cell)`\n  border-left: solid 1px #000;\n`;\nconst ProximityCell = styled(Cell)`\n  justify-content: flex-end;\n`;\n\nconst Title = styled.h1`\n  font-size: 1rem;\n  font-weight: 400;\n  margin: 0;\n  display: flex;\n  align-items: center;\n`;\n\nconst Empty = styled(Title)`\n  height: 100%;\n  width: 100%;\n  background-color: rgba(0,0,0,0.04);\n  text-align: center;\n  grid-row: 1 / -1;\n  justify-content: center;\n  align-items: center;\n`;\n\nconst Circle = styled.div`\n  border: solid 3px black;\n  border-radius: 400px;\n  width: 0.75rem;\n  height: 0.7rem;\n  margin-right: 0.5rem;\n  flex-shrink: 0;\n`;\n\nconst Label = styled.span`\n  text-transform: uppercase;\n`;\n\nconst Table = (props) => {\n  const {nodes, hovered, updateSimulation} = props;\n  const highlightedRef = useRef(null);\n  const containerRef = useRef(null);\n\n  useEffect(() => {\n    if (highlightedRef && highlightedRef.current && containerRef && containerRef.current && hovered !== undefined) {\n      const highlightedNode = highlightedRef.current;\n      const containerNode = containerRef.current;\n      containerNode.scrollTop = highlightedNode.offsetTop - highlightedNode.offsetHeight;\n    }\n  }, [highlightedRef, containerRef, hovered])\n\n  if (nodes) {\n    const {selected, connected} = nodes;\n    const title = selected.label.replace(selected.id, '');\n    const connectedNodes = connected.map((node, i) => {\n      const {id, label, color, parent} = node;\n      const highlight = hovered && hovered.node && hovered.node.id === id;\n      const onClick = () => updateSimulation ? updateSimulation.triggerSimulationUpdate(node) : null;\n      const strength = i < Math.floor((connected.length - 1) / 2) ? 'High' : 'Low';\n      return (\n        <NodeListItem\n          $color={color}\n          style={{backgroundColor: highlight ? rgba(color, 0.4) : undefined}}\n          ref={highlight ? highlightedRef : undefined}\n          onClick={onClick}\n          key={id}\n        >\n          <Cell\n            style={{borderLeft: `5px solid ${color}`}}\n          >\n            <Rank>{String.fromCharCode(64 + (i + 1))}</Rank>\n            <div>{label.replace(id, '')}</div>\n          </Cell>\n          <SectorCell>{parent.name}</SectorCell>\n          <ProximityCell>{strength}</ProximityCell>\n        </NodeListItem>\n      );\n    })\n    const onClear = () => updateSimulation ? updateSimulation.clearSelections() : null;\n    return (\n      <Root>\n        <BackButton onClick={onClear}>{'< Back to Industry Space'}</BackButton>\n        <Content>\n        <Title>\n            <Circle style={{backgroundColor: selected.color}} />\n            <div><Label>Selected industry:</Label> {title}</div>\n          </Title>\n          <NodeList ref={containerRef}>\n            <TableTitle>\n              <Cell>Industry Name</Cell>\n              <SectorCell style={{border: 'none'}}>Sector</SectorCell>\n              <ProximityCell>Relatedness</ProximityCell>\n            </TableTitle>\n            {connectedNodes}\n          </NodeList>\n        </Content>\n      </Root>\n    );\n  } else {\n    return (\n      <Root>\n        <Content>\n          <Empty>Click a node for more details</Empty>\n        </Content>\n      </Root>\n    );\n  }\n}\n\nexport default Table;\n","import React, {useEffect, useRef, useState} from 'react';\nimport * as d3 from 'd3';\nimport raw from 'raw.macro';\nimport * as polished from 'polished';\nimport Table from './StrengthTable';\nimport styled from 'styled-components';\n\nconst Tooltip = styled.div`\n  position: fixed;\n  max-width: 100px;\n  font-family: 'OfficeCodeProWeb', monospace;\n  font-size: 0.75rem;\n  text-align: center;\n  pointer-events: none;\n  transform: translate(-50%, calc(-100% - 1rem));\n  font-weight: 600;\n  color: black;\n  text-shadow:\n   -1px -1px 0 #fff,  \n    1px -1px 0 #fff,\n    -1px 1px 0 #fff,\n     1px 1px 0 #fff;\n`;\n\nconst minExpectedScreenSize = 1020;\n\n// const data = JSON.parse(raw('../data/industry-space-with-start-positions.json'));\nconst data = JSON.parse(raw('../data/umap-custom-2.json'));\nconst proximityNodes = JSON.parse(raw('../data/proximity-min-max.json'));\nconst naicsData = JSON.parse(raw('../data/naics_2017.json'));\n\nconst colorMap = [\n  { id: '0', color: '#A973BE' },\n  { id: '1', color: '#F1866C' },\n  { id: '2', color: '#FFC135' },\n  { id: '3', color: '#93CFD0' },\n  { id: '4', color: '#488098' },\n  { id: '5', color: '#77C898' },\n  { id: '6', color: '#6A6AAD' },\n  { id: '7', color: '#D35162' },\n  { id: '8', color: '#F28188' },\n]\n\nconst createForceGraph = (rootEl, data, setNodeList, setHovered) => {\n  const root = d3.select(rootEl);\n\n  const height = window.innerHeight;\n  const width =  window.innerWidth - 450;\n\n  const smallerSize = width < height ? width : height;\n  const padding = smallerSize * 0.1;\n  const widthMargin = (width - smallerSize) / 2;\n  const heightMargin = (height - (smallerSize * 0.9)) / 2;\n  const rangeWidth = width - padding - widthMargin;\n  const rangeHeight = height - padding - heightMargin;\n\n  const allXValues = [];\n  const allYValues = [];\n  data.nodes.forEach(({x, y}) => {\n    allXValues.push(x);\n    allYValues.push(y);\n  });\n\n  const radiusAdjuster = smallerSize / minExpectedScreenSize;\n\n  data.nodes = data.nodes.map(n => {\n    let radius = Math.random() * 6;\n    radius = radius < 2.5 ? 2.5 * radiusAdjuster : radius * radiusAdjuster;\n    // const radius = 2.5;\n    const industry6Digit = naicsData.find(({code}) => n.id.toString() === code);\n    if (!industry6Digit) {\n      throw new Error('undefined industry');\n      \n    }\n    const naics_id = industry6Digit.naics_id;\n    let topLevelParentId = naics_id.toString();\n    let current = naicsData.find(datum => datum.naics_id === naics_id);\n    while(current && current.parent_id !== null) {\n    // eslint-disable-next-line\n      current = naicsData.find(datum => datum.naics_id === current.parent_id);\n      if (current && current.parent_id !== null) {\n        topLevelParentId = current.parent_id.toString();\n      } else if (current && current.naics_id !== null) {\n        topLevelParentId = current.naics_id.toString();\n      }\n    }\n    if (parseInt(topLevelParentId, 10) > 8) {\n      console.error(current);\n      throw new Error('Parent out of range')\n    }\n    const {color} = colorMap.find(({id}) => id === topLevelParentId);\n    return {...n, radius, color, parent: current}\n  })\n\n  const xRange = d3.extent(allXValues);\n  const yRange = d3.extent(allYValues);\n\n  const xScale = d3.scaleLinear()\n    .domain(xRange)\n    .range([0 + padding + widthMargin, rangeWidth]);\n\n  const yScale = d3.scaleLinear()\n    .domain(yRange)\n    .range([ rangeHeight, 0 + padding + heightMargin]);\n\n  const canvas = root.append('canvas')\n    .attr('width', width + 'px')\n    .attr('height', height + 'px')\n    .node();\n\n  const context = canvas.getContext('2d');\n\n\n  const simulation = d3.forceSimulation()\n                .force(\"center\", d3.forceCenter(rangeWidth / 1.3, rangeHeight / 1.8))\n                .force(\"charge\", d3.forceManyBody().strength(-10))\n                .force(\"collision\", d3.forceCollide().radius(function(d) {\n                  return (d.radius * 1.25) * (minExpectedScreenSize / smallerSize);\n                }))\n                .force(\"link\", d3.forceLink().strength(d => d.proximity).id(d => d.id))\n                .velocityDecay(0.96)\n  let k = 0;\n  while ((simulation.alpha() > 1e-2) && (k < 150)) {\n      simulation.tick();\n      k = k + 1;\n  }\n\n  let transform = d3.zoomIdentity;\n\n\n  let hoveredNode = undefined;\n  let highlightedNode = undefined;\n  let primaryNodes = [];\n  let secondaryNodes = [];\n\n  const update = initGraph(data);\n\n  function initGraph(tempData){\n\n    function zoomed() {\n      transform = d3.event.transform;\n      simulationUpdate();\n    }\n\n    const zoom = d3.zoom().scaleExtent([1 / 10, 8]).on(\"zoom\", zoomed);\n    \n    const canvasEl = d3.select(canvas);\n    canvasEl\n      .call(zoom)\n      .on('mousemove', function() {\n        hoveredNode = dragsubject();        \n        setHovered({node: hoveredNode, coords: {x: d3.event.x, y: d3.event.y}});\n        simulationUpdate();\n      })\n      .on('click', function(event) {\n        const node = dragsubject();\n        highlightedNode = node;\n        if (node) {\n          primaryNodes = [];\n          secondaryNodes = [];\n          proximityNodes[node.id].forEach(({trg, proximity}, i) => {\n            const node2 = tempData.nodes.find(n => n.id === trg);\n            if (node2) {\n              if (i < Math.floor((proximityNodes[node.id].length - 1) / 2)) {\n                primaryNodes.push({...node2, proximity});\n              } else {\n                secondaryNodes.push({...node2, proximity});\n              }\n            }\n          });\n          const allEdgeXValues = [];\n          const allEdgeYValues = [];\n          [node, ...primaryNodes].forEach(n => {\n            allEdgeXValues.push(xScale(n.x));\n            allEdgeYValues.push(yScale(n.y));\n          });\n\n          const xBounds = d3.extent(allEdgeXValues);\n          const yBounds = d3.extent(allEdgeYValues);\n          const bounds = [\n            [xBounds[0], yBounds[0]],\n            [xBounds[1], yBounds[1]],\n          ];\n          const dx = bounds[1][0] - bounds[0][0];\n          const dy = bounds[1][1] - bounds[0][1];\n          const x = (bounds[0][0] + bounds[1][0]) / 2;\n          const y = (bounds[0][1] + bounds[1][1]) / 2;\n          const scale = Math.max(1, Math.min(8, 0.9 / Math.max(dx / rangeWidth, dy / rangeHeight)));\n          const translate = [width / 2 - scale * x, height / 2 - scale * y];\n\n          canvasEl.transition()\n              .duration(500)\n              .call( zoom.transform, d3.zoomIdentity.translate(translate[0],translate[1]).scale(scale));\n\n          setNodeList({\n            selected: node,\n            connected: [...primaryNodes, ...secondaryNodes],\n          })\n        } else {\n          primaryNodes = [];\n          secondaryNodes = [];\n          setNodeList(undefined);\n        }\n        simulationUpdate();\n      })\n\n\n\n    function dragsubject() {\n      const x = transform.invertX(d3.event.x);\n      const y = transform.invertY(d3.event.y);\n      for (let i = tempData.nodes.length - 1; i >= 0; --i) {\n        const node = tempData.nodes[i];\n        let nodeX = xScale(node.x);\n        let nodeY = yScale(node.y);\n        const dx = x - nodeX;\n        const dy = y - nodeY;\n\n        if (dx * dx + dy * dy < node.radius * node.radius) {\n\n          nodeX =  transform.applyX(nodeX);\n          nodeY = transform.applyY(nodeY);\n\n          return node;\n        }\n      }\n    }\n\n    simulation.nodes(tempData.nodes)\n              .on(\"tick\", simulationUpdate);\n\n    simulation.force(\"link\")\n              .links(tempData.edges);\n\n\n\n    function simulationUpdate() {\n      const highlightedId = highlightedNode && highlightedNode.id ? highlightedNode.id : undefined;\n\n      context.save();\n\n      context.clearRect(0, 0, width, height);\n      context.translate(transform.x, transform.y);\n      context.scale(transform.k, transform.k);\n\n      // Draw the nodes\n      tempData.nodes.forEach(function(d, i) {\n        context.beginPath();\n        context.arc(xScale(d.x), yScale(d.y), d.radius, 0, 2 * Math.PI, true);\n        context.fillStyle = highlightedId === undefined ? d.color : polished.rgba(d.color, 0.035);\n        context.fill();\n      });\n\n      if (hoveredNode) {\n        rootEl.style.cursor = 'pointer';\n        context.beginPath();\n        context.arc(xScale(hoveredNode.x), yScale(hoveredNode.y), hoveredNode.radius, 0, 2 * Math.PI, true);\n        context.fillStyle = hoveredNode.color\n        context.fill();\n        context.strokeStyle = 'black';\n        context.stroke();\n      } else {\n        rootEl.style.cursor = 'move';\n      }\n      if (highlightedNode) {\n        context.beginPath();\n        context.arc(xScale(highlightedNode.x), yScale(highlightedNode.y), highlightedNode.radius, 0, 2 * Math.PI, true);\n        context.fillStyle = highlightedNode.color\n        context.fill();\n        context.strokeStyle = 'black';\n        context.stroke();\n      }\n      let nodeCount = 1;\n      if (primaryNodes && primaryNodes.length) {\n        primaryNodes.forEach(function(d, i) {\n          context.beginPath();\n          context.arc(xScale(d.x), yScale(d.y), d.radius, 0, 2 * Math.PI, true);\n          context.fillStyle = polished.rgba(d.color, 0.8);\n          context.fill();\n\n          context.textAlign = 'center';\n          context.textBaseline = 'middle';\n          context.font = `400 ${d.radius}px OfficeCodeProWeb`;\n          context.fillStyle = \"white\";\n          context.fillText(String.fromCharCode(64 + nodeCount++), xScale(d.x), yScale(d.y));\n        });\n      }\n      if (secondaryNodes && secondaryNodes.length) {\n        secondaryNodes.forEach(function(d, i) {\n          context.beginPath();\n          context.arc(xScale(d.x), yScale(d.y), d.radius, 0, 2 * Math.PI, true);\n          context.fillStyle = polished.rgba(d.color, 0.35);\n          context.fill();\n\n          context.textAlign = 'center';\n          context.textBaseline = 'middle';\n          context.font = `400 ${d.radius}px OfficeCodeProWeb`;\n          context.fillStyle = \"white\";\n          context.fillText(String.fromCharCode(64 + nodeCount++), xScale(d.x), yScale(d.y));\n        });\n      }\n\n      context.restore();\n    }\n\n    const triggerSimulationUpdate = (node) => {\n      if (node) {\n        highlightedNode = node;\n        primaryNodes = [];\n        secondaryNodes = [];\n        proximityNodes[node.id].forEach(({trg, proximity}, i) => {\n          const node2 = tempData.nodes.find(n => n.id === trg);\n          if (node2) {\n            if (i < Math.floor((proximityNodes[node.id].length - 1) / 2)) {\n              primaryNodes.push({...node2, proximity});\n            } else {\n              secondaryNodes.push({...node2, proximity});\n            }\n          }\n        });\n        const allEdgeXValues = [];\n        const allEdgeYValues = [];\n        [node, ...primaryNodes].forEach(n => {\n          allEdgeXValues.push(xScale(n.x));\n          allEdgeYValues.push(yScale(n.y));\n        });\n\n        const xBounds = d3.extent(allEdgeXValues);\n        const yBounds = d3.extent(allEdgeYValues);\n        const bounds = [\n          [xBounds[0], yBounds[0]],\n          [xBounds[1], yBounds[1]],\n        ];\n        const dx = bounds[1][0] - bounds[0][0];\n        const dy = bounds[1][1] - bounds[0][1];\n        const x = (bounds[0][0] + bounds[1][0]) / 2;\n        const y = (bounds[0][1] + bounds[1][1]) / 2;\n        const scale = Math.max(1, Math.min(8, 0.9 / Math.max(dx / rangeWidth, dy / rangeHeight)));\n        const translate = [width / 2 - scale * x, height / 2 - scale * y];\n\n        canvasEl.transition()\n            .duration(500)\n            .call( zoom.transform, d3.zoomIdentity.translate(translate[0],translate[1]).scale(scale));\n\n        setNodeList({\n          selected: node,\n          connected: [...primaryNodes, ...secondaryNodes],\n        })\n      } else {\n        setNodeList(undefined);\n      }\n      simulationUpdate();\n    }\n    const clearSelections = () => {\n      const allEdgeXValues = [];\n      const allEdgeYValues = [];\n      tempData.nodes.forEach(n => {\n        allEdgeXValues.push(xScale(n.x));\n        allEdgeYValues.push(yScale(n.y));\n      });\n\n      const xBounds = d3.extent(allEdgeXValues);\n      const yBounds = d3.extent(allEdgeYValues);\n      const bounds = [\n        [xBounds[0], yBounds[0]],\n        [xBounds[1], yBounds[1]],\n      ];\n      const dx = bounds[1][0] - bounds[0][0];\n      const dy = bounds[1][1] - bounds[0][1];\n      const x = (bounds[0][0] + bounds[1][0]) / 2;\n      const y = (bounds[0][1] + bounds[1][1]) / 2;\n      const scale = Math.max(1, Math.min(8, 0.9 / Math.max(dx / rangeWidth, dy / rangeHeight)));\n      const translate = [width / 2 - scale * x, height / 2 - scale * y];\n\n      canvasEl.transition()\n          .duration(500)\n          .call( zoom.transform, d3.zoomIdentity.translate(translate[0],translate[1]).scale(scale));\n      hoveredNode = undefined;\n      highlightedNode = undefined;\n      primaryNodes = [];\n      secondaryNodes = [];\n      setNodeList(undefined);\n      simulationUpdate();\n    }\n    return {triggerSimulationUpdate, clearSelections};\n  }\n  setTimeout(() => {\n    update.clearSelections();\n  }, 0)\n\n  return update;\n}\n\nexport default () => {\n  const rootNodeRef = useRef(null);\n  const [nodeList, setNodeList] = useState(undefined);\n  const [hovered, setHovered] = useState(undefined);\n  const [updateSimulation, setUpdateSimulation] = useState(undefined);\n\n  useEffect(() => {\n    let rootEl = null;\n    if (rootNodeRef && rootNodeRef.current) {\n      rootEl = rootNodeRef.current;\n      const triggerSimulationUpdate = createForceGraph(rootEl, data, setNodeList, setHovered);\n      setUpdateSimulation(triggerSimulationUpdate);\n    }\n    return (() => {\n      if (rootEl) {\n        rootEl.innerHTML = '';\n      }\n    })\n  }, [rootNodeRef, setNodeList, setHovered, setUpdateSimulation]);\n\n  const tooltip = hovered && hovered.node ? (\n    <Tooltip\n      style={{top: hovered.coords.y, left: hovered.coords.x}}\n    >\n      {hovered.node.label.replace(hovered.node.id, '')}\n    </Tooltip>\n  ) : null\n\n  return (\n    <div>\n      {tooltip}\n      <div ref={rootNodeRef} />\n      <Table nodes={nodeList} hovered={hovered} updateSimulation={updateSimulation} />\n    </div>\n  );\n}\n","import React from 'react'\nimport CanvasIndustrySpace from '../components/CanvasIndustrySpaceUMapProximityEdgesThresholdWithTableSrength.js';\nimport Legend from '../components/BasicLegend';\n\nexport default () => {\n  return (\n    <div>\n      <CanvasIndustrySpace />\n      <Legend tableLayout={true} />\n    </div>\n  );\n}\n","export default function _arrayLikeToArray(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n\n  for (var i = 0, arr2 = new Array(len); i < len; i++) {\n    arr2[i] = arr[i];\n  }\n\n  return arr2;\n}","import arrayLikeToArray from \"./arrayLikeToArray\";\nexport default function _unsupportedIterableToArray(o, minLen) {\n  if (!o) return;\n  if (typeof o === \"string\") return arrayLikeToArray(o, minLen);\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return Array.from(n);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return arrayLikeToArray(o, minLen);\n}","export default function _taggedTemplateLiteral(strings, raw) {\n  if (!raw) {\n    raw = strings.slice(0);\n  }\n\n  return Object.freeze(Object.defineProperties(strings, {\n    raw: {\n      value: Object.freeze(raw)\n    }\n  }));\n}","import arrayWithHoles from \"./arrayWithHoles\";\nimport iterableToArrayLimit from \"./iterableToArrayLimit\";\nimport unsupportedIterableToArray from \"./unsupportedIterableToArray\";\nimport nonIterableRest from \"./nonIterableRest\";\nexport default function _slicedToArray(arr, i) {\n  return arrayWithHoles(arr) || iterableToArrayLimit(arr, i) || unsupportedIterableToArray(arr, i) || nonIterableRest();\n}","export default function _arrayWithHoles(arr) {\n  if (Array.isArray(arr)) return arr;\n}","export default function _iterableToArrayLimit(arr, i) {\n  if (typeof Symbol === \"undefined\" || !(Symbol.iterator in Object(arr))) return;\n  var _arr = [];\n  var _n = true;\n  var _d = false;\n  var _e = undefined;\n\n  try {\n    for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) {\n      _arr.push(_s.value);\n\n      if (i && _arr.length === i) break;\n    }\n  } catch (err) {\n    _d = true;\n    _e = err;\n  } finally {\n    try {\n      if (!_n && _i[\"return\"] != null) _i[\"return\"]();\n    } finally {\n      if (_d) throw _e;\n    }\n  }\n\n  return _arr;\n}","export default function _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}","export default function _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}","import defineProperty from \"./defineProperty\";\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    if (enumerableOnly) symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    });\n    keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nexport default function _objectSpread2(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n\n    if (i % 2) {\n      ownKeys(Object(source), true).forEach(function (key) {\n        defineProperty(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys(Object(source)).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n\n  return target;\n}","import arrayWithoutHoles from \"./arrayWithoutHoles\";\nimport iterableToArray from \"./iterableToArray\";\nimport unsupportedIterableToArray from \"./unsupportedIterableToArray\";\nimport nonIterableSpread from \"./nonIterableSpread\";\nexport default function _toConsumableArray(arr) {\n  return arrayWithoutHoles(arr) || iterableToArray(arr) || unsupportedIterableToArray(arr) || nonIterableSpread();\n}","import arrayLikeToArray from \"./arrayLikeToArray\";\nexport default function _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) return arrayLikeToArray(arr);\n}","export default function _iterableToArray(iter) {\n  if (typeof Symbol !== \"undefined\" && Symbol.iterator in Object(iter)) return Array.from(iter);\n}","export default function _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}","module.exports = __webpack_public_path__ + \"static/media/sector-legend.a4fd20af.png\";","import React from 'react';\nimport styled from 'styled-components/macro';\n\nconst Root = styled.div`\n  position: fixed;\n  bottom: 0;\n  left: 0;\n  right: 0;\n  pointer-events: none;\n  z-index: 100;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  box-sizing:  border-box;\n  padding-left: 2rem;\n  padding-bottom: 2rem;\n`;\n\nconst Legend = styled.img`\n  width: 100%;\n  max-width: 800px;\n`;\n\nexport default ({tableLayout}) => {\n  return (\n    <Root\n      style={{paddingRight: tableLayout ? 550 : undefined}}\n    >\n      <Legend src={require('../sector-legend.png')} />\n    </Root>\n  );\n}\n"],"sourceRoot":""}