{"version":3,"sources":["components/CanvasIndustrySpaceUMapCustomHighlighted.js","pages/IndustrySpaceCustomHighlighting.js","../../node_modules/react-scripts/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/arrayLikeToArray.js","../../node_modules/react-scripts/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/unsupportedIterableToArray.js","../../node_modules/react-scripts/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral.js","../../node_modules/react-scripts/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray.js","../../node_modules/react-scripts/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/arrayWithHoles.js","../../node_modules/react-scripts/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/iterableToArrayLimit.js","../../node_modules/react-scripts/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/nonIterableRest.js","../../node_modules/react-scripts/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty.js","../../node_modules/react-scripts/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2.js","../../node_modules/react-scripts/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js","../../node_modules/react-scripts/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/arrayWithoutHoles.js","../../node_modules/react-scripts/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/iterableToArray.js","../../node_modules/react-scripts/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/nonIterableSpread.js","../node_modules/d3-timer/src/timer.js","../node_modules/d3-timer/src/interval.js","pages/download.svg"],"names":["sectorColorMap","id","color","Tooltip","styled","div","getLines","ctx","text","maxWidth","words","split","lines","currentLine","i","length","word","measureText","width","push","data","JSON","parse","proximityNodes","naicsData","BackButton","button","codeList","rootNodeRef","useRef","useState","undefined","nodeList","setNodeList","hovered","setHovered","updateSimulation","setUpdateSimulation","useEffect","rootEl","current","triggerSimulationUpdate","root","d3","height","window","innerHeight","innerWidth","smallerSize","padding","widthMargin","heightMargin","rangeWidth","rangeHeight","allXValues","allYValues","nodes","forEach","x","y","map","n","industry6Digit","find","code","toString","Error","naics_id","naics_code","label","name","topLevelParentId","datum","parent_id","parseInt","console","error","mapped","isIncluded","radius","parent","initial_x","initial_y","xRange","yRange","xScale","domain","range","yScale","canvas","append","attr","node","context","getContext","simulation","force","strength","d","proximity","alphaDecay","transform","hoveredNode","highlightedNode","primaryNodes","secondaryNodes","shouldTick","update","tempData","zoom","scaleExtent","on","simulationUpdate","drawPoint","r","currentPoint","totalPoints","centerX","centerY","angle","Math","PI","cos","sin","canvasEl","dragsubject","invertX","invertY","nodeX","nodeY","dx","dy","applyX","applyY","highlightedId","save","clearRect","translate","scale","k","beginPath","arc","strokeStyle","lineWidth","stroke","fillStyle","fill","textAlign","textBaseline","font","reverse","t","fillText","nodeCount","String","fromCharCode","shortenedLabel","slice","trg","polished","linkedNodes","targetNode","moveTo","lineTo","style","cursor","restore","call","coords","event","node2","numPrimary","floor","numSecondary","newCoords","new_x","new_y","xDist","yDist","x_interval","y_interval","allEdgeXValues","allEdgeYValues","xBounds","yBounds","bounds","max","min","transition","duration","interval","elapsed","currentNode","ceil","stop","selected","connected","links","edges","clearSelections","initGraph","setTimeout","createForceGraph","innerHTML","tooltip","top","left","replace","backButton","onClick","ref","UtilityBar","DownloadButton","SvgIcon","img","Modal","ModalContent","Backdrop","CloseButton","Textarea","textarea","UpdateButton","downloadImage","link","document","createElement","download","href","querySelector","toDataURL","click","remove","modalOpen","setModalOpen","setCodeList","textAreaRef","React","modal","placeholder","value","codes","marginRight","src","DownloadSVGURL","alt","key","join","_arrayLikeToArray","arr","len","arr2","Array","_unsupportedIterableToArray","o","minLen","Object","prototype","constructor","from","test","_taggedTemplateLiteral","strings","raw","freeze","defineProperties","_slicedToArray","isArray","Symbol","iterator","_arr","_n","_d","_e","_s","_i","next","done","err","unsupportedIterableToArray","TypeError","_defineProperty","obj","defineProperty","enumerable","configurable","writable","ownKeys","object","enumerableOnly","keys","getOwnPropertySymbols","symbols","filter","sym","getOwnPropertyDescriptor","apply","_objectSpread2","target","arguments","source","getOwnPropertyDescriptors","_toConsumableArray","arrayLikeToArray","iter","taskHead","taskTail","frame","timeout","clockLast","clockNow","clockSkew","clock","performance","now","Date","setFrame","requestAnimationFrame","bind","f","clearNow","Timer","this","_call","_time","_next","wake","e","timerFlush","t0","t2","t1","time","Infinity","sleep","nap","poke","delay","clearTimeout","clearInterval","setInterval","callback","restart","total","_restart","tick","module","exports"],"mappings":"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","file":"static/js/25.788020fa.chunk.js","sourcesContent":["import React, {useEffect, useRef, useState} from 'react';\nimport * as d3 from 'd3';\nimport raw from 'raw.macro';\nimport styled from 'styled-components';\nimport {interval} from 'd3-timer';\nimport * as polished from 'polished';\n\nconst sectorColorMap = [\n  { id: '0', color: '#A973BE' },\n  { id: '1', color: '#F1866C' },\n  { id: '2', color: '#FFC135' },\n  { id: '3', color: '#93CFD0' },\n  { id: '4', color: '#488098' },\n  { id: '5', color: '#77C898' },\n  { id: '6', color: '#6A6AAD' },\n  { id: '7', color: '#D35162' },\n  { id: '8', color: '#F28188' },\n];\n\n\nconst Tooltip = styled.div`\n  position: fixed;\n  max-width: 100px;\n  font-family: 'OfficeCodeProWeb', monospace;\n  font-size: 0.75rem;\n  text-align: center;\n  pointer-events: none;\n  transform: translate(-50%, calc(-100% - 1rem));\n  font-weight: 600;\n  color: black;\n  text-shadow:\n   -1px -1px 0 #fff,  \n    1px -1px 0 #fff,\n    -1px 1px 0 #fff,\n     1px 1px 0 #fff;\n`;\n\nfunction getLines(ctx, text, maxWidth) {\n    var words = text.split(\" \");\n    var lines = [];\n    var currentLine = words[0];\n\n    for (var i = 1; i < words.length; i++) {\n        var word = words[i];\n        var width = ctx.measureText(currentLine + \" \" + word).width;\n        if (width < maxWidth) {\n            currentLine += \" \" + word;\n        } else {\n            lines.push(currentLine);\n            currentLine = word;\n        }\n    }\n    lines.push(currentLine);\n    return lines;\n}\n\nconst minExpectedScreenSize = 1020;\n\n// const data = JSON.parse(raw('../data/industry-space-with-start-positions.json'));\nconst data = JSON.parse(raw('../data/umap-clusters-custom-2.json'));\nconst proximityNodes = JSON.parse(raw('../data/proximity-min-max.json'));\nconst naicsData = JSON.parse(raw('../data/naics_2017.json'));\n\nconst createForceGraph = (rootEl, data, setNodeList, setHovered, codeList) => {\n  const root = d3.select(rootEl);\n\n  const height = window.innerHeight;\n  const width =  window.innerWidth;\n\n  const smallerSize = width < height ? width : height;\n  const padding = smallerSize * 0.1;\n  const widthMargin = (width - smallerSize) / 2;\n  const heightMargin = (height - (smallerSize * 0.9)) / 2;\n  const rangeWidth = width - padding - widthMargin;\n  const rangeHeight = height - padding - heightMargin;\n\n  const allXValues = [];\n  const allYValues = [];\n  data.nodes.forEach(({x, y}) => {\n    allXValues.push(x);\n    allYValues.push(y);\n  });\n\n  // const radiusAdjuster = smallerSize / minExpectedScreenSize;\n\n  data.nodes = data.nodes.map(n => {\n    // let radius = Math.random() * 6;\n    // radius = radius < 2.5 ? 2.5 * radiusAdjuster : radius * radiusAdjuster;\n    const radius = 2.5;\n    const industry6Digit = naicsData.find(({code}) => n.id.toString() === code);\n    if (!industry6Digit) {\n      throw new Error('undefined industry');\n    }\n    const naics_id = industry6Digit.naics_id;\n    const naics_code = industry6Digit.code;\n    const label = industry6Digit.name;\n    let topLevelParentId = naics_id.toString();\n    let current = naicsData.find(datum => datum.naics_id === naics_id);\n    while(current && current.parent_id !== null) {\n    // eslint-disable-next-line\n      current = naicsData.find(datum => datum.naics_id === current.parent_id);\n      if (current && current.parent_id !== null) {\n        topLevelParentId = current.parent_id.toString();\n      } else if (current && current.naics_id !== null) {\n        topLevelParentId = current.naics_id.toString();\n      }\n    }\n    if (parseInt(topLevelParentId, 10) > 8) {\n      console.error(current);\n      throw new Error('Parent out of range')\n    }\n    const mapped = sectorColorMap.find(({id}) => id === topLevelParentId);\n    const isIncluded = codeList && codeList.length ? codeList.find(code => code === naics_code) : true;\n    return {\n      ...n,\n      radius,\n      color: isIncluded && mapped !== undefined ? mapped.color : '#ddd',\n      parent: current,\n      label,\n      initial_x: n.x,\n      initial_y: n.y,\n    }\n  })\n\n  const xRange = d3.extent(allXValues);\n  const yRange = d3.extent(allYValues);\n\n  const xScale = d3.scaleLinear()\n    .domain(xRange)\n    .range([0 + padding + widthMargin, rangeWidth]);\n\n  const yScale = d3.scaleLinear()\n    .domain(yRange)\n    .range([ rangeHeight, 0 + padding + heightMargin]);\n\n  const canvas = root.append('canvas')\n    .attr('width', width + 'px')\n    .attr('height', height + 'px')\n    .node();\n\n  const context = canvas.getContext('2d');\n\n\n  const simulation = d3.forceSimulation()\n                .force(\"center\", d3.forceCenter(rangeWidth / 1.3, rangeHeight / 1.8))\n                .force(\"charge\", d3.forceManyBody().strength(-10))\n                .force(\"collision\", d3.forceCollide().radius(function(d) {\n                  return (d.radius * 1.25) * (minExpectedScreenSize / smallerSize);\n                }))\n                .force(\"link\", d3.forceLink().strength(d => d.proximity).id(d => d.id))\n                .alphaDecay(0.99)\n\n  let transform = d3.zoomIdentity;\n\n\n  let hoveredNode = undefined;\n  let highlightedNode = undefined;\n  let primaryNodes = [];\n  let secondaryNodes = [];\n  let shouldTick = false;\n\n  const update = initGraph(data);\n\n  function initGraph(tempData){\n\n    function zoomed() {\n      transform = d3.event.transform;\n      simulationUpdate();\n    }\n\n    const zoom = d3.zoom().scaleExtent([1 / 10, 8]).on(\"zoom\", zoomed);\n\n    function drawPoint(r, currentPoint, totalPoints, centerX, centerY) {  \n\n      var theta = ((Math.PI*2) / totalPoints);\n      var angle = (theta * currentPoint);\n\n      const x = (r * Math.cos(angle) + centerX);\n      const y = (r * Math.sin(angle) + centerY);\n\n      return {x, y};\n    }\n\n    const canvasEl = d3.select(canvas);\n    canvasEl\n      .call(zoom)\n      .on('mousemove', function() {\n        if (!shouldTick) {\n          hoveredNode = dragsubject();\n          setHovered({node: hoveredNode, coords: {x: d3.event.x, y: d3.event.y}});\n          simulationUpdate();\n        }\n      })\n      .on('click', function(event) {\n        const node = dragsubject();\n        if (node) {\n          highlightedNode = node;\n          primaryNodes = [];\n          secondaryNodes = [];\n          proximityNodes[node.id].forEach(({trg, proximity}, i) => {\n            const node2 = tempData.nodes.find(n => n.id === trg);\n            if (node2) {\n              const numPrimary = Math.floor((proximityNodes[node.id].length - 1) / 2);\n              const numSecondary = proximityNodes[node.id].length - numPrimary;\n              if (i < numPrimary) {\n                const newCoords = drawPoint(20, i, numPrimary, node.x, node.y)\n                node2.new_x = newCoords.x;\n                node2.new_y = newCoords.y;\n                const xDist = newCoords.x > node2.x ? newCoords.x - node2.x : node2.x - newCoords.x;\n                const yDist = newCoords.y > node2.y ? newCoords.y - node2.y : node2.y - newCoords.y;\n                node2.x_interval = xDist / 20;\n                node2.y_interval = yDist / 20;\n                primaryNodes.push({\n                  ...node2,\n                  proximity,\n                });\n              } else {\n                const newCoords = drawPoint(40, i, numSecondary, node.x, node.y)\n                node2.new_x = newCoords.x;\n                node2.new_y = newCoords.y;\n                const xDist = newCoords.x > node2.x ? newCoords.x - node2.x : node2.x - newCoords.x;\n                const yDist = newCoords.y > node2.y ? newCoords.y - node2.y : node2.y - newCoords.y;\n                node2.x_interval = xDist / 20;\n                node2.y_interval = yDist / 20;\n                secondaryNodes.push({\n                  ...node2,\n                  proximity,\n                });\n              }\n            }\n          });\n          const allEdgeXValues = [];\n          const allEdgeYValues = [];\n          [...primaryNodes, ...secondaryNodes].forEach(n => {\n            allEdgeXValues.push(xScale(n.new_x));\n            allEdgeYValues.push(yScale(n.new_y));\n          });\n\n          const xBounds = d3.extent(allEdgeXValues);\n          const yBounds = d3.extent(allEdgeYValues);\n          const bounds = [\n            [xBounds[0], yBounds[0]],\n            [xBounds[1], yBounds[1]],\n          ];\n          const dx = bounds[1][0] - bounds[0][0];\n          const dy = bounds[1][1] - bounds[0][1];\n          const x = (bounds[0][0] + bounds[1][0]) / 2;\n          const y = (bounds[0][1] + bounds[1][1]) / 2;\n          const scale = Math.max(1, Math.min(8, 0.9 / Math.max(dx / rangeWidth, dy / rangeHeight)));\n          const translate = [width / 2 - scale * x, height / 2 - scale * y];\n\n          canvasEl.transition()\n              .duration(500)\n              .call( zoom.transform, d3.zoomIdentity.translate(translate[0],translate[1]).scale(scale))\n\n          const t = interval(function(elapsed) {\n            shouldTick = false;\n            [...primaryNodes, ...secondaryNodes].forEach(n => {\n              const currentNode = tempData.nodes.find(d => d.id === n.id);\n              if (Math.ceil(currentNode.x) === Math.ceil(currentNode.new_x)) {\n                currentNode.x = currentNode.new_x;\n              } else {\n                shouldTick = true;\n                currentNode.x = currentNode.x > currentNode.new_x\n                  ? currentNode.x - currentNode.x_interval\n                  : currentNode.x + currentNode.x_interval;\n              }\n              if (Math.ceil(currentNode.y) === Math.ceil(currentNode.new_y)) {\n                currentNode.y = currentNode.new_y;\n              } else {\n                shouldTick = true;\n                currentNode.y = currentNode.y > currentNode.new_y\n                  ? currentNode.y - currentNode.y_interval\n                  : currentNode.y + currentNode.y_interval;\n              }\n            });\n            simulationUpdate();\n            if (!shouldTick || elapsed > 350) {\n              t.stop()\n            };\n          }, 10);\n          setNodeList({\n            selected: node,\n            connected: [...primaryNodes, ...secondaryNodes],\n          })\n          setHovered({node: undefined, coords: {x: d3.event.x, y: d3.event.y}});\n        }\n        simulationUpdate();\n      })\n\n\n\n    function dragsubject() {\n      const x = transform.invertX(d3.event.x);\n      const y = transform.invertY(d3.event.y);\n      for (let i = tempData.nodes.length - 1; i >= 0; --i) {\n        const node = tempData.nodes[i];\n        let nodeX = xScale(node.x);\n        let nodeY = yScale(node.y);\n        const dx = x - nodeX;\n        const dy = y - nodeY;\n\n        if (dx * dx + dy * dy < node.radius * node.radius) {\n\n          nodeX =  transform.applyX(nodeX);\n          nodeY = transform.applyY(nodeY);\n\n          if ((!primaryNodes.length && !secondaryNodes.length) ||\n                primaryNodes.find(n => n.id === node.id) ||\n                secondaryNodes.find(n => n.id === node.id)) {\n\n            return node;\n          }\n\n        }\n      }\n    }\n\n    simulation.nodes(tempData.nodes)\n              .on(\"tick\", simulationUpdate);\n\n    simulation.force(\"link\")\n              .links(tempData.edges);\n\n    function simulationUpdate() {\n      const highlightedId = highlightedNode && highlightedNode.id ? highlightedNode.id : undefined;\n\n      context.save();\n\n      context.clearRect(0, 0, width, height);\n      context.translate(transform.x, transform.y);\n      context.scale(transform.k, transform.k);\n\n      // Draw the nodes\n      if (highlightedNode) {\n        context.beginPath();\n        context.arc(\n          xScale(highlightedNode.x),\n          yScale(highlightedNode.y),\n          20 / (minExpectedScreenSize / smallerSize),\n          0,\n          2 * Math.PI,\n          true\n        );\n        context.strokeStyle = '#dfdfdf';\n        context.lineWidth = 0.2;\n        context.stroke();\n\n        context.beginPath();\n        context.arc(\n          xScale(highlightedNode.x),\n          yScale(highlightedNode.y),\n          40 / (minExpectedScreenSize / smallerSize),\n          0,\n          2 * Math.PI,\n          true\n        );\n        context.stroke();\n\n        context.beginPath();\n        context.arc(xScale(highlightedNode.x), yScale(highlightedNode.y), highlightedNode.radius, 0, 2 * Math.PI, true);\n        context.fillStyle = highlightedNode.color\n        context.fill();\n        context.strokeStyle = 'black';\n        context.stroke();\n\n\n        context.textAlign = 'center';\n        context.textBaseline = 'middle';\n        context.fillStyle = \"#000\";\n        context.font = `400 1.3px OfficeCodeProWeb`;\n        getLines(context, highlightedNode.label, 15).reverse().forEach((t, i) => {\n          context.fillText(t, xScale(highlightedNode.x), yScale(highlightedNode.y) - (2 * (i + 2)));\n        });\n      }\n      let nodeCount = 1;\n      if (!primaryNodes.length && !secondaryNodes.length) {\n        tempData.nodes.forEach(function(d, i) {\n          context.beginPath();\n          context.arc(xScale(d.x), yScale(d.y), d.radius, 0, 2 * Math.PI, true);\n          context.fillStyle = !hoveredNode ||\n            (hoveredNode.id === d.id || proximityNodes[hoveredNode.id].find(n => n.trg === d.id))\n            ? d.color : polished.rgba(d.color, 0.125);\n          context.fill();\n        });\n\n\n        if (hoveredNode) {\n          const linkedNodes = [hoveredNode];\n          proximityNodes[hoveredNode.id].forEach(function({trg}) {\n            const targetNode = tempData.nodes.find(({id}) => id === trg);\n            context.beginPath();\n            context.moveTo(xScale(hoveredNode.x), yScale(hoveredNode.y));\n            context.lineTo(xScale(targetNode.x), yScale(targetNode.y));\n            context.strokeStyle = '#afafaf';\n            context.stroke();\n            linkedNodes.push(targetNode);\n          });\n\n          linkedNodes.forEach(function(d, i) {\n            if (d) {\n              context.beginPath();\n              context.arc(xScale(d.x), yScale(d.y), d.radius, 0, 2 * Math.PI, true);\n              context.fillStyle = d.color;\n              context.fill();\n              context.strokeStyle = '#afafaf';\n              context.stroke();\n            }\n          });\n        }\n      } else {\n        [...primaryNodes, ...secondaryNodes].forEach(function(d, i) {\n          const node = tempData.nodes.find(n => n.id === d.id);\n          context.beginPath();\n          context.arc(xScale(node.x), yScale(node.y), node.radius, 0, 2 * Math.PI, true);\n          context.fillStyle = node.color;\n          context.fill();\n\n          context.textAlign = 'center';\n          context.textBaseline = 'middle';\n          context.font = `400 ${node.radius}px OfficeCodeProWeb`;\n          context.fillStyle = \"white\";\n          context.fillText(String.fromCharCode(64 + nodeCount++), xScale(node.x), yScale(node.y));\n\n\n          if (!hoveredNode || hoveredNode.id !== d.id) {\n            context.fillStyle = \"#000\";\n            context.font = `400 1.3px OfficeCodeProWeb`;\n            const shortenedLabel = d.label.length <= 30 ? d.label : d.label.slice(0, 30) + '...'\n            getLines(context, shortenedLabel, 15).reverse().forEach((t, i) => {\n              context.fillText(t, xScale(node.x), yScale(node.y) - (2 * (i + 2)));\n            });\n          }\n        });\n      }\n\n      if (hoveredNode && hoveredNode.id !== highlightedId) {\n        rootEl.style.cursor = 'pointer';\n        context.beginPath();\n        context.arc(xScale(hoveredNode.x), yScale(hoveredNode.y), hoveredNode.radius, 0, 2 * Math.PI, true);\n        context.strokeStyle = 'black';\n        context.stroke();\n      } else {\n        rootEl.style.cursor = 'move';\n      }\n\n      context.restore();\n    }\n\n    const triggerSimulationUpdate = (node) => {\n      if (node) {\n        highlightedNode = node;\n        primaryNodes = [];\n        secondaryNodes = [];\n        proximityNodes[node.id].forEach(({trg, proximity}, i) => {\n          const node2 = tempData.nodes.find(n => n.id === trg);\n          if (node2) {\n            const numPrimary = Math.floor((proximityNodes[node.id].length - 1) / 2);\n            const numSecondary = proximityNodes[node.id].length - numPrimary;\n            if (i < numPrimary) {\n              const newCoords = drawPoint(20, i, numPrimary, node.x, node.y)\n              node2.new_x = newCoords.x;\n              node2.new_y = newCoords.y;\n              const xDist = newCoords.x > node2.x ? newCoords.x - node2.x : node2.x - newCoords.x;\n              const yDist = newCoords.y > node2.y ? newCoords.y - node2.y : node2.y - newCoords.y;\n              node2.x_interval = xDist / 20;\n              node2.y_interval = yDist / 20;\n              primaryNodes.push({\n                ...node2,\n                proximity,\n              });\n            } else {\n              const newCoords = drawPoint(40, i, numSecondary, node.x, node.y)\n              node2.new_x = newCoords.x;\n              node2.new_y = newCoords.y;\n              const xDist = newCoords.x > node2.x ? newCoords.x - node2.x : node2.x - newCoords.x;\n              const yDist = newCoords.y > node2.y ? newCoords.y - node2.y : node2.y - newCoords.y;\n              node2.x_interval = xDist / 20;\n              node2.y_interval = yDist / 20;\n              secondaryNodes.push({\n                ...node2,\n                proximity,\n              });\n            }\n          }\n        });\n        const allEdgeXValues = [];\n        const allEdgeYValues = [];\n        [...primaryNodes, ...secondaryNodes].forEach(n => {\n          allEdgeXValues.push(xScale(n.new_x));\n          allEdgeYValues.push(yScale(n.new_y));\n        });\n\n        const xBounds = d3.extent(allEdgeXValues);\n        const yBounds = d3.extent(allEdgeYValues);\n        const bounds = [\n          [xBounds[0], yBounds[0]],\n          [xBounds[1], yBounds[1]],\n        ];\n        const dx = bounds[1][0] - bounds[0][0];\n        const dy = bounds[1][1] - bounds[0][1];\n        const x = (bounds[0][0] + bounds[1][0]) / 2;\n        const y = (bounds[0][1] + bounds[1][1]) / 2;\n        const scale = Math.max(1, Math.min(8, 0.9 / Math.max(dx / rangeWidth, dy / rangeHeight)));\n        const translate = [width / 2 - scale * x, height / 2 - scale * y];\n\n        canvasEl.transition()\n            .duration(500)\n            .call( zoom.transform, d3.zoomIdentity.translate(translate[0],translate[1]).scale(scale));\n\n        const t = interval(function(elapsed) {\n          shouldTick = false;\n          [...primaryNodes, ...secondaryNodes].forEach(n => {\n            const currentNode = tempData.nodes.find(d => d.id === n.id);\n            if (Math.ceil(currentNode.x) === Math.ceil(currentNode.new_x)) {\n              currentNode.x = currentNode.new_x;\n            } else {\n              shouldTick = true;\n              currentNode.x = currentNode.x > currentNode.new_x\n                ? currentNode.x - currentNode.x_interval\n                : currentNode.x + currentNode.x_interval;\n            }\n            if (Math.ceil(currentNode.y) === Math.ceil(currentNode.new_y)) {\n              currentNode.y = currentNode.new_y;\n            } else {\n              shouldTick = true;\n              currentNode.y = currentNode.y > currentNode.new_y\n                ? currentNode.y - currentNode.y_interval\n                : currentNode.y + currentNode.y_interval;\n            }\n          });\n          simulationUpdate();\n          if (!shouldTick || elapsed > 350) {\n            t.stop()\n          };\n        }, 10);\n        setNodeList({\n          selected: node,\n          connected: [...primaryNodes, ...secondaryNodes],\n        })\n      } else {\n        setNodeList(undefined);\n      }\n      simulationUpdate();\n    }\n    const clearSelections = () => {\n      const allEdgeXValues = [];\n      const allEdgeYValues = [];\n      tempData.nodes.forEach(n => {\n        allEdgeXValues.push(xScale(n.x));\n        allEdgeYValues.push(yScale(n.y));\n        n.x = n.initial_x;\n        n.y = n.initial_y;\n      });\n\n      const xBounds = d3.extent(allEdgeXValues);\n      const yBounds = d3.extent(allEdgeYValues);\n      const bounds = [\n        [xBounds[0], yBounds[0]],\n        [xBounds[1], yBounds[1]],\n      ];\n      const dx = bounds[1][0] - bounds[0][0];\n      const dy = bounds[1][1] - bounds[0][1];\n      const x = (bounds[0][0] + bounds[1][0]) / 2;\n      const y = (bounds[0][1] + bounds[1][1]) / 2;\n      const scale = Math.max(1, Math.min(8, 0.9 / Math.max(dx / rangeWidth, dy / rangeHeight)));\n      const translate = [width / 2 - scale * x, height / 2 - scale * y];\n\n      canvasEl.transition()\n          .duration(500)\n          .call( zoom.transform, d3.zoomIdentity.translate(translate[0],translate[1]).scale(scale));\n      hoveredNode = undefined;\n      highlightedNode = undefined;\n      primaryNodes = [];\n      secondaryNodes = [];\n      setNodeList(undefined);\n      simulationUpdate();\n    }\n    return {triggerSimulationUpdate, clearSelections};\n  }\n  setTimeout(() => {\n    update.clearSelections();\n  }, 0)\n\n  return update;\n}\n\nconst BackButton = styled.button`\n  position: fixed;\n  left: 0;\n  top: 0;\n  background-color: transparent;\n  border: none;\n  font-size: 1rem;\n  font-family: 'OfficeCodeProWeb', monospace;\n  cursor: pointer;\n  padding: 1rem;\n`;\n\n\nexport default ({codeList}) => {\n  const rootNodeRef = useRef(null);\n  const [nodeList, setNodeList] = useState(undefined);\n  const [hovered, setHovered] = useState(undefined);\n  const [updateSimulation, setUpdateSimulation] = useState(undefined);\n\n  useEffect(() => {\n    let rootEl = null;\n    if (rootNodeRef && rootNodeRef.current) {\n      rootEl = rootNodeRef.current;\n      const triggerSimulationUpdate = createForceGraph(rootEl, data, setNodeList, setHovered, codeList);\n      setUpdateSimulation(triggerSimulationUpdate);\n    }\n    return (() => {\n      if (rootEl) {\n        rootEl.innerHTML = '';\n      }\n    })\n  }, [rootNodeRef, setNodeList, setHovered, setUpdateSimulation, codeList]);\n\n  const tooltip = hovered && hovered.node ? (\n    <Tooltip\n      style={{top: hovered.coords.y, left: hovered.coords.x}}\n    >\n      {hovered.node.label.replace(hovered.node.id, '')}\n    </Tooltip>\n  ) : null\n\n  const onClear = () => updateSimulation ? updateSimulation.clearSelections() : null;\n  const backButton = nodeList ? (\n    <BackButton onClick={onClear}>{'< Back to Industry Space'}</BackButton>\n  ) : null;\n\n  return (\n    <div>\n      {backButton}\n      {tooltip}\n      <div ref={rootNodeRef} />\n    </div>\n  );\n}\n","import React, {useState} from 'react'\nimport IndustrySpace from '../components/CanvasIndustrySpaceUMapCustomHighlighted';\nimport styled from 'styled-components';\nimport DownloadSVGURL from './download.svg';\n\nconst UtilityBar = styled.div`\n  position: fixed;\n  top: 0;\n  right: 0;\n  z-index: 1000;\n  display: flex;\n  margin: 1rem;\n`;\n\nconst DownloadButton = styled.button`\n  padding: 0.4rem;\n  font-family: OfficeCodeProWeb, monospace;\n  font-size: 1.1rem;\n  cursor: pointer;\n  border: solid 1px #6f6f6f;\n  border-radius: 0;\n  font-size: 0.75rem;\n`;\n\nconst SvgIcon = styled.img`\n  width: 0.9rem;\n  margin-right: 0.3rem;\n`;\n\nconst Modal = styled.div`\n  position: fixed;\n  top: 0;\n  right: 0;\n  left: 0;\n  bottom: 0;\n  z-index: 2000;\n  display: flex;\n  font-family: OfficeCodeProWeb, monospace;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n`;\n\nconst ModalContent = styled.div`\n  padding: 1rem 2rem;\n  border: solid 1px #6f6f6f;\n  border-radius: 8px;\n  background-color: #fff;\n  width: 400px;\n  font-size: 0.85rem;\n  position: relative;\n  box-sizing: border-box;\n`;\n\nconst Backdrop = styled.div`\n  position: absolute;\n  top: 0;\n  right: 0;\n  left: 0;\n  bottom: 0;\n  background-color: rgba(0, 0, 0, 0.4);\n`;\n\nconst CloseButton = styled.button`\n  padding: 0.4rem;\n  font-family: OfficeCodeProWeb, monospace;\n  font-size: 1.1rem;\n  cursor: pointer;\n  border: none;\n  background-color: transparent;\n  border-radius: 0;\n  position: absolute;\n  top: 0;\n  right: 0;\n`;\n\nconst Textarea = styled.textarea`\n  padding: 1rem;\n  border: solid 1px #6f6f6f;\n  border-radius: 8px;\n  width: 100%;\n  height: 500px;\n  font-size: 0.85rem;\n  box-sizing: border-box;\n`;\n\nconst UpdateButton = styled(DownloadButton)`\n  width: 100%;\n  margin-top: 1rem;\n`;\n\nconst downloadImage = () => {\n  var link = document.createElement('a');\n  link.download = `industry-space-custom.png`;\n  link.href = document.querySelector('canvas').toDataURL()\n  link.click();\n  link.remove();\n};\n\nexport default () => {\n  const [modalOpen, setModalOpen] = useState(false);\n  const [codeList, setCodeList] = useState([]);\n  const textAreaRef = React.useRef();\n\n  const updateCodeList = () => {\n    const node = textAreaRef.current;\n    if (node && node.value.length) {\n      const codes = node.value.split('\\n');\n      setCodeList(codes);\n    } else {\n      setCodeList([])\n    }\n    setModalOpen(false);\n  }\n\n  const modal = modalOpen ? (\n    <Modal>\n      <Backdrop onClick={() => setModalOpen(false)} />\n      <ModalContent>\n        <CloseButton onClick={() => setModalOpen(false)}>×</CloseButton>\n        <p>\n          Copy &amp; Paste a series of 6-Digit NAICS Codes into the text area below. Each one should be on a seperate line. Leave blank to highlight everything.\n        </p>\n        <Textarea\n          placeholder={\n            'e.g.\\n922150\\n922160\\n922190\\n923110\\n923120\\n923130\\n923140\\n924110\\n924120\\n925110\\n925120\\n622210\\n622310\\n623110\\n623210\\n623220\\n623311\\n623312'\n          }\n          ref={textAreaRef}\n        />\n        <UpdateButton onClick={updateCodeList}>\n          Update\n        </UpdateButton>\n      </ModalContent>\n    </Modal>\n  ) : null;\n\n  return (\n    <div>\n      <UtilityBar>\n        <DownloadButton style={{marginRight: '1rem'}} onClick={() => setModalOpen(true)}>\n          Set Custom Highlighting\n        </DownloadButton>\n        <DownloadButton onClick={downloadImage}>\n          <SvgIcon src={DownloadSVGURL} alt={'Download PNG'} />\n          Download Image\n        </DownloadButton>\n      </UtilityBar>\n      <IndustrySpace key={codeList.join('-')} codeList={codeList} />\n      {modal}\n    </div>\n  );\n}\n","export default function _arrayLikeToArray(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n\n  for (var i = 0, arr2 = new Array(len); i < len; i++) {\n    arr2[i] = arr[i];\n  }\n\n  return arr2;\n}","import arrayLikeToArray from \"./arrayLikeToArray\";\nexport default function _unsupportedIterableToArray(o, minLen) {\n  if (!o) return;\n  if (typeof o === \"string\") return arrayLikeToArray(o, minLen);\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return Array.from(n);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return arrayLikeToArray(o, minLen);\n}","export default function _taggedTemplateLiteral(strings, raw) {\n  if (!raw) {\n    raw = strings.slice(0);\n  }\n\n  return Object.freeze(Object.defineProperties(strings, {\n    raw: {\n      value: Object.freeze(raw)\n    }\n  }));\n}","import arrayWithHoles from \"./arrayWithHoles\";\nimport iterableToArrayLimit from \"./iterableToArrayLimit\";\nimport unsupportedIterableToArray from \"./unsupportedIterableToArray\";\nimport nonIterableRest from \"./nonIterableRest\";\nexport default function _slicedToArray(arr, i) {\n  return arrayWithHoles(arr) || iterableToArrayLimit(arr, i) || unsupportedIterableToArray(arr, i) || nonIterableRest();\n}","export default function _arrayWithHoles(arr) {\n  if (Array.isArray(arr)) return arr;\n}","export default function _iterableToArrayLimit(arr, i) {\n  if (typeof Symbol === \"undefined\" || !(Symbol.iterator in Object(arr))) return;\n  var _arr = [];\n  var _n = true;\n  var _d = false;\n  var _e = undefined;\n\n  try {\n    for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) {\n      _arr.push(_s.value);\n\n      if (i && _arr.length === i) break;\n    }\n  } catch (err) {\n    _d = true;\n    _e = err;\n  } finally {\n    try {\n      if (!_n && _i[\"return\"] != null) _i[\"return\"]();\n    } finally {\n      if (_d) throw _e;\n    }\n  }\n\n  return _arr;\n}","export default function _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}","export default function _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}","import defineProperty from \"./defineProperty\";\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    if (enumerableOnly) symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    });\n    keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nexport default function _objectSpread2(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n\n    if (i % 2) {\n      ownKeys(Object(source), true).forEach(function (key) {\n        defineProperty(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys(Object(source)).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n\n  return target;\n}","import arrayWithoutHoles from \"./arrayWithoutHoles\";\nimport iterableToArray from \"./iterableToArray\";\nimport unsupportedIterableToArray from \"./unsupportedIterableToArray\";\nimport nonIterableSpread from \"./nonIterableSpread\";\nexport default function _toConsumableArray(arr) {\n  return arrayWithoutHoles(arr) || iterableToArray(arr) || unsupportedIterableToArray(arr) || nonIterableSpread();\n}","import arrayLikeToArray from \"./arrayLikeToArray\";\nexport default function _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) return arrayLikeToArray(arr);\n}","export default function _iterableToArray(iter) {\n  if (typeof Symbol !== \"undefined\" && Symbol.iterator in Object(iter)) return Array.from(iter);\n}","export default function _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}","var frame = 0, // is an animation frame pending?\n    timeout = 0, // is a timeout pending?\n    interval = 0, // are any timers active?\n    pokeDelay = 1000, // how frequently we check for clock skew\n    taskHead,\n    taskTail,\n    clockLast = 0,\n    clockNow = 0,\n    clockSkew = 0,\n    clock = typeof performance === \"object\" && performance.now ? performance : Date,\n    setFrame = typeof window === \"object\" && window.requestAnimationFrame ? window.requestAnimationFrame.bind(window) : function(f) { setTimeout(f, 17); };\n\nexport function now() {\n  return clockNow || (setFrame(clearNow), clockNow = clock.now() + clockSkew);\n}\n\nfunction clearNow() {\n  clockNow = 0;\n}\n\nexport function Timer() {\n  this._call =\n  this._time =\n  this._next = null;\n}\n\nTimer.prototype = timer.prototype = {\n  constructor: Timer,\n  restart: function(callback, delay, time) {\n    if (typeof callback !== \"function\") throw new TypeError(\"callback is not a function\");\n    time = (time == null ? now() : +time) + (delay == null ? 0 : +delay);\n    if (!this._next && taskTail !== this) {\n      if (taskTail) taskTail._next = this;\n      else taskHead = this;\n      taskTail = this;\n    }\n    this._call = callback;\n    this._time = time;\n    sleep();\n  },\n  stop: function() {\n    if (this._call) {\n      this._call = null;\n      this._time = Infinity;\n      sleep();\n    }\n  }\n};\n\nexport function timer(callback, delay, time) {\n  var t = new Timer;\n  t.restart(callback, delay, time);\n  return t;\n}\n\nexport function timerFlush() {\n  now(); // Get the current time, if not already set.\n  ++frame; // Pretend we’ve set an alarm, if we haven’t already.\n  var t = taskHead, e;\n  while (t) {\n    if ((e = clockNow - t._time) >= 0) t._call.call(null, e);\n    t = t._next;\n  }\n  --frame;\n}\n\nfunction wake() {\n  clockNow = (clockLast = clock.now()) + clockSkew;\n  frame = timeout = 0;\n  try {\n    timerFlush();\n  } finally {\n    frame = 0;\n    nap();\n    clockNow = 0;\n  }\n}\n\nfunction poke() {\n  var now = clock.now(), delay = now - clockLast;\n  if (delay > pokeDelay) clockSkew -= delay, clockLast = now;\n}\n\nfunction nap() {\n  var t0, t1 = taskHead, t2, time = Infinity;\n  while (t1) {\n    if (t1._call) {\n      if (time > t1._time) time = t1._time;\n      t0 = t1, t1 = t1._next;\n    } else {\n      t2 = t1._next, t1._next = null;\n      t1 = t0 ? t0._next = t2 : taskHead = t2;\n    }\n  }\n  taskTail = t0;\n  sleep(time);\n}\n\nfunction sleep(time) {\n  if (frame) return; // Soonest alarm already set, or will be.\n  if (timeout) timeout = clearTimeout(timeout);\n  var delay = time - clockNow; // Strictly less than if we recomputed clockNow.\n  if (delay > 24) {\n    if (time < Infinity) timeout = setTimeout(wake, time - clock.now() - clockSkew);\n    if (interval) interval = clearInterval(interval);\n  } else {\n    if (!interval) clockLast = clock.now(), interval = setInterval(poke, pokeDelay);\n    frame = 1, setFrame(wake);\n  }\n}\n","import {Timer, now} from \"./timer.js\";\n\nexport default function(callback, delay, time) {\n  var t = new Timer, total = delay;\n  if (delay == null) return t.restart(callback, delay, time), t;\n  t._restart = t.restart;\n  t.restart = function(callback, delay, time) {\n    delay = +delay, time = time == null ? now() : +time;\n    t._restart(function tick(elapsed) {\n      elapsed += total;\n      t._restart(tick, total += delay, time);\n      callback(elapsed);\n    }, delay, time);\n  }\n  t.restart(callback, delay, time);\n  return t;\n}\n","module.exports = __webpack_public_path__ + \"static/media/download.02e9c647.svg\";"],"sourceRoot":""}